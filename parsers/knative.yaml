---
- name: "knative"
  show_in_selector: false
  matchkeys:
    - image_name: "/knative-releases/log-sink"
  parser_rules:
    - name: "custom_splitter"
      options:
        regex: '^\d{4}-\d\d-\d\d \d\d:\d\d:\d\d.\d{3} ([A-Z]{4})  \[([^]]+)\] (.*)'
        severity:
          field: 1
          transform: "4letter"
        facility:
          fields:
            - 2
        message:
          field: 3
    - name: "custom_splitter"
      options:
        regex: '^([A-Z]{4}) (.+)'
        severity:
          field: 1
          transform: "4letter"
        message:
          field: 2
    - name: "custom_line"
      options:
        block_start:
          - matchtype: "startswith"
            matchkey: "__  ____ "
            matchline: "any"
            format_block_start: true
        block_end:
          - matchtype: "startswith"
            matchkey: "--\\___\\"
            matchline: "any"
            format_block_end: true
        loglevel: "notice"
    - name: "override_severity"
      overrides:
        - matchtype: "regex"
          matchkey: ".*Apache Camel.+is starting"
          loglevel: "notice"
        - matchtype: "regex"
          matchkey: ".*log-sink .+on JVM"
          loglevel: "notice"
