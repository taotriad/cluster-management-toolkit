---
- name: "kube-apiserver"
  show_in_selector: false
  matchkeys:
    - image_name: "/kube-apiserver"
  parser_rules:
    - name: "glog"
    - name: "ts_8601"
    - name: "json"
    - name: "key_value_with_leading_message"
    - name: "expand_event"
    - name: "override_severity"
      overrides:
        - matchtype: "startswith"
          matchkey: "Version: v"
          loglevel: "notice"
        - matchtype: "startswith"
          matchkey: "cert-regeneration-controller version"
          loglevel: "notice"
        - matchtype: "startswith"
          matchkey: "check-endpoints version"
          loglevel: "notice"
        - matchtype: "startswith"
          matchkey: "kube-apiserver-operator version"
          loglevel: "notice"
        - matchtype: "startswith"
          matchkey: "Trace["
          loglevel: "debug"
        - matchtype: "startswith"
          matchkey: "httputil: ReverseProxy read error"
          loglevel: "error"
        - matchtype: "startswith"
          matchkey: "http2: server: error"
          loglevel: "error"
        - matchtype: "startswith"
          matchkey: "ERROR "
          loglevel: "error"
        - matchtype: "regex"
          matchkey: 'Flag \S+? has been deprecated'
          loglevel: "warning"
        - matchtype: "regex"
          matchkey: ".*check failed:.*"
          loglevel: "warning"
        - matchtype: "endswith"
          matchkey: "check is not yet complete"
          loglevel: "warning"
- name: "kube-apiserver"
  show_in_selector: false
  matchkeys:
    - container_name: "kube-apiserver-operator"
    - pod_name: "kube-apiserver"
      container_name: "kube-apiserver"
    - pod_name: "kube-apiserver"
      container_name: "kube-apiserver-cert-syncer"
    - pod_name: "kube-apiserver"
      container_name: "kube-apiserver-cert-regeneration-controller"
    - pod_name: "kube-apiserver"
      container_name: "kube-apiserver-insecure-readyz"
    - pod_name: "kube-apiserver"
      container_name: "kube-apiserver-check-endpoints"
  parser_rules:
    - name: "glog"
    - name: "key_value_with_leading_message"
    - name: "expand_event"
    - name: "override_severity"
      overrides:
        - matchtype: "startswith"
          matchkey: "Trace["
          loglevel: "debug"
