---
kind: "NodeReadinessRule"
api_family: "readiness.node.x-k8s.io"
default_command: "nodereadinessrules"
command:
  - "nrrs"
  - "nrr"
listview:
  name: "Node Readiness Rules"
  group: "Observability"
  field_indexes:
    Normal:
      fields: ["name", "age"]
infoview:
  name: "Node Readiness Rule Info"
  infopad:
    row_indexes:
      Normal:
        fields: ["enforcement_mode", "node_label_selector",
                 "taint"]
    rows:
      enforcement_mode:
        header: [["Enforcement Mode:", ["main", "infoheader"]]]
        path: "spec#enforcementMode"
        default: "<unset>"
        type: "str"
      node_label_selector:
        header: [["Node La", ["main", "infoheader"]],
                 ["b", ["main", "infoheader_shortcut"]],
                 ["el Selector:", ["main", "infoheader"]]]
        paths:
          - path: ["spec#nodeSelector#matchLabels"]
            pathtype: "key_value"
            default: ["<none>"]
        formatter: "list"
        formatting:
          field_colors:
            - type: "key"
            - type: "value"
          field_separators:
            - type: "selector"
      taint:
        header: [["Taint:", ["main", "infoheader"]]]
        paths:
          - path: [["spec#taint#key"],
                   ["spec#taint#value"],
                   ["spec#taint#effect"]]
            pathtype: "tuple"
        default: ["<none>"]
        formatter: "list"
        formatting:
          field_colors:
            - type: "key"
            - type: "value"
            - type: "generic"
          field_separators:
            - type: "keyvalue"
            - type: "field"
          mapping:
            mappings:
              NoSchedule:
                field_colors:
                  - context: "main"
                    type: "status_not_ok"
              PreferNoSchedule:
                field_colors:
                  - context: "main"
                    type: "status_warning"
              NoExecute:
                field_colors:
                  - context: "main"
                    type: "status_not_ok"
  listpad:
    listgetter: "listgetter_path"
    listgetter_args:
      path: "spec#conditions"
    infogetter: "generic_infogetter"
    field_indexes:
      Normal:
        fields: ["type", "required_status"]
    fields:
      type:
        header: "Type:"
        path: "type"
        default: "<unset>"
        type: "str"
      required_status:
        header: "Required Status:"
        path: "requiredStatus"
        default: "<unset>"
        type: "str"
  shortcuts:
    "Node Label Selector":
      key: "b"
      read_only: true
      helptext: "Show Node label selector"
      widget: "windowwidget"
      title: "Node Label Selector:"
      headers: ["Key:", "Value:"]
      itemgetter: "get_key_value"
      itemgetter_args:
        path: "spec#nodeSelector#matchLabels"
