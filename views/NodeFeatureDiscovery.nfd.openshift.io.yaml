---
kind: "NodeFeatureDiscovery"
api_family: "nfd.openshift.io"
default_command: "nodefeaturediscoveries"
command:
  - "osnfds"
  - "osnfd"
listview:
  name: "Node Feature Discoveries"
  group: "OpenShift"
  field_indexes:
    Normal:
      fields: ["namespace", "name", "age"]
      sortcolumn: "namespace"
infoview:
  name: "Node Feature Discovery Info"
  infopad:
    row_indexes:
      Normal:
        fields: ["operand_header", "operand_image", "operand_pull_policy",
                 "operand_service_port",
                 "extra_label_namespaces",
                 "enable_taints", "prune_on_delete", "topology_updater"]
    rows:
      enable_taints:
        header: [["Enable Taints:", ["main", "infoheader"]]]
        path: "spec#enableTaints"
        default: "<unset>"
        type: "bool"
      extra_label_namespaces:
        header: [["Extra Label Namespaces:", ["main", "infoheader"]]]
        path: "spec#extraLabelNs"
        type: "raw"
        formatter: "list"
      operand_header:
        header: [["Operand:", ["main", "infoheader"]]]
      operand_image:
        header: [["  Image:", ["main", "infoheader"]]]
        paths:
          - path: "spec#operand#image"
            pathtype: "regex"
            regex: "^([^:]+):(.*)"
            default: ["<none>"]
        formatter: "list"
        formatting:
          field_colors:
            - type: "generic"
            - type: "version"
          field_separators:
            - type: "version"
      operand_pull_policy:
        header: [["  Image Pull Policy:", ["main", "infoheader"]]]
        path: "spec#operand#imagePullPolicy"
        default: "<unset>"
        type: "str"
      operand_service_port:
        header: [["  Service Port:", ["main", "infoheader"]]]
        path: "spec#operand#servicePort"
        default: "<unset>"
        type: "int"
        formatter: "numerical"
      prune_on_delete:
        header: [["Pruner on Delete:", ["main", "infoheader"]]]
        path: "spec#prunerOnDelete"
        default: "<unset>"
        type: "bool"
      topology_updater:
        header: [["Topology Updater:", ["main", "infoheader"]]]
        path: "spec#topologyUpdater"
        default: "<unset>"
        type: "bool"
  logpad:
    infogetter: "logpad_formatted"
    infogetter_args:
      formatter: "format_yaml"
      path: "spec#workerConfig"
    timestamps: false
  shortcuts:
    "Extra Label Namespaces":
      key: "b"
      read_only: true
      helptext: "List extra label Namespaces"
      widget: "windowwidget"
      title: "Extra Label Namespaces:"
      selectable: true
      itemgetter: "get_list_as_list"
      itemgetter_args:
        path: "spec#extraLabelNs"
      # Not supported for now
      sortcolumn: "name"
      action: "call"
      action_call: "resourceinfodispatch_with_lookup"
      action_args:
        kind: "Namespace"
        name_path: 0
